import{c as v,H as j,j as e,X as w,r as s,P as C,T as z}from"./index-0edf21a1.js";import{F as p}from"./file-text-42117152.js";import{M as D}from"./more-vertical-adbb54c4.js";import{U as k}from"./upload-e7419da2.js";const L=v("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),N=j.memo(({onDismiss:t})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md border-2 border-dashed border-indigo-300 dark:border-indigo-700 mb-6 relative",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(w,{size:20})}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(L,{className:"text-indigo-500 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:"Welcome to Rect Words"})]}),e.jsx("ol",{className:"list-decimal list-inside space-y-2 text-gray-600 dark:text-gray-400",children:e.jsx("li",{children:"Get started by uploading a reading material"})})]}));N.displayName="WelcomeGuide";const y=j.memo(({doc:t,openDocument:n,onEdit:m,onDelete:o,openMenuId:a,setOpenMenuId:i,menuRef:h})=>{const x=s.useCallback(r=>{r.stopPropagation(),i(a===t.id?null:t.id)},[a,t.id,i]),c=s.useCallback(r=>{r.stopPropagation(),m(t),i(null)},[m,t,i]),d=s.useCallback(r=>{r.stopPropagation(),o(t),i(null)},[o,t,i]),g=s.useCallback(()=>{n(t)},[n,t]),u=s.useMemo(()=>{var r;return((r=t.words)==null?void 0:r.size)||0},[t.words]),b=s.useMemo(()=>Math.round((t.content||"").split(" ").length/200),[t.content]);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 dark:border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx(p,{className:"text-indigo-500",size:32}),e.jsxs("div",{className:"relative",ref:a===t.id?h:null,children:[e.jsx("button",{onClick:x,className:"p-1 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(D,{size:20})}),a===t.id&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-md shadow-lg z-10 border border-gray-200 dark:border-gray-600",children:[e.jsxs("button",{onClick:c,className:"w-full text-left flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600",children:[e.jsx(C,{size:16,className:"mr-2"})," Edit Document"]}),e.jsxs("button",{onClick:d,className:"w-full text-left flex items-center px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/50",children:[e.jsx(z,{size:16,className:"mr-2"})," Delete Document"]})]})]})]}),e.jsxs("div",{onClick:g,className:"cursor-pointer flex-grow mt-2",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 mb-2",children:t.title}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm line-clamp-2",children:t.content})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-700 flex justify-between items-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[u," words saved"]}),e.jsxs("span",{children:[b," min read"]})]})]})});y.displayName="DocumentCard";const R=({documents:t,openDocument:n,onUpload:m,onDelete:o,onEdit:a,showWelcome:i,onDismissWelcome:h})=>{const[x,c]=s.useState(null),d=s.useRef(null),g=s.useCallback(r=>{d.current&&!d.current.contains(r.target)&&c(null)},[]);s.useEffect(()=>{if(!(typeof window>"u"||typeof document>"u"))return document.addEventListener("mousedown",g),()=>{typeof document<"u"&&document.removeEventListener("mousedown",g)}},[g]);const u=s.useMemo(()=>t.length,[t.length]),b=s.useMemo(()=>{const r=[...t].sort((l,f)=>new Date(f.lastUpdated||f.createdAt||0)-new Date(l.lastUpdated||l.createdAt||0));return r.length<=20?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(l=>e.jsx(y,{doc:l,openDocument:n,onEdit:a,onDelete:o,openMenuId:x,setOpenMenuId:c,menuRef:d},l.id))}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.slice(0,50).map(l=>e.jsx(y,{doc:l,openDocument:n,onEdit:a,onDelete:o,openMenuId:x,setOpenMenuId:c,menuRef:d},l.id))})},[t,n,a,o,x,c,d]);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:["Library (",u,")"]}),e.jsxs("button",{onClick:m,className:"flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg shadow hover:bg-indigo-700 transition-colors",children:[e.jsx(k,{size:20,className:"mr-2"}),"Add Document"]})]}),i&&e.jsx(N,{onDismiss:h}),u>0?e.jsx("div",{className:"transition-all duration-300 ease-in-out",children:b}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-10 text-center shadow-md border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx(p,{className:"text-indigo-500 h-16 w-16"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200 mb-2",children:"No documents found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Get started by uploading a reading material"}),e.jsxs("button",{onClick:m,className:"py-2 px-6 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg transition-colors duration-200 shadow-sm flex items-center mx-auto",children:[e.jsx(k,{size:18,className:"mr-2"}),"Add Document"]})]})]})},T=j.memo(R);export{T as default};
